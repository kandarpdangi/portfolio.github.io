<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gyroscope</title>
    <link rel="stylesheet" href="./index.css">
    
</head>
<body onload="gyros();" id='mainbody'>
    <div class="p-3 mb-2 bg-secondary" id="demo-div">
    <h4>Gyroscope</h4>
        <ul>
            <li>X-axis: <span id="Gyroscope_x">0</span><span>&deg;/s</span></li>
            <li>Y-axis: <span id="Gyroscope_y">0</span><span>&deg;/s</span></li>
            <li>Z-axis: <span id="Gyroscope_z">0</span><span>&deg;/s</span></li>
        </ul>    
    </div>
        
    <!-- <script src="./index.js"></script> -->
    <script src="./gyro.js"></script>
    <script>
      
function updateFieldIfNotNull(fieldName, value){
    if (value != null)
      document.getElementById(fieldName).innerHTML = value.toFixed();
      console.log(fieldName ,' - ' ,value);
  }
  
  function handleMotion(event) {
    console.log('hello');
    updateFieldIfNotNull('Gyroscope_z', event.rotationRate.alpha);
    updateFieldIfNotNull('Gyroscope_x', event.rotationRate.beta);
    updateFieldIfNotNull('Gyroscope_y', event.rotationRate.gamma);
  }
  
  function gyros(e){  
    // Request permission for iOS 13+ devices
    if (
      DeviceMotionEvent &&
      typeof DeviceMotionEvent.requestPermission === "function"
    ) {
      DeviceMotionEvent.requestPermission();
    }
    
    {
      window.addEventListener("devicemotion", handleMotion);
    }
  };
    </script>

</body>
</html>